<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>EPO Design Patterns: Actions outside of tests</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">EPO Design Patterns
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Actions outside of tests </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>When writing tests, it is possible to avoid duplication of code by using the <a href="https://github.com/nunit/docs/wiki/SetUp-and-TearDown">SetUp and TearDown</a> methods built into <a href="http://www.nunit.org/">NUnit</a>. The <a class="el" href="namespace_unity.html">Unity</a> Test Framework has extended these methods with extra functionality, which can yield commands and skip frames, in the same way as /home/santeri/UnityProjects/EPO_design_patterns/Library/PackageCache/com<a href="#" onclick="location.href='mai'+'lto:'+'.un'+'it'+'y.t'+'es'+'t-f'+'ra'+'mew'+'or'+'k@1'+'.1'+'.22'; return false;">.unit<span style="display: none;">.nosp@m.</span>y.te<span style="display: none;">.nosp@m.</span>st-fr<span style="display: none;">.nosp@m.</span>amew<span style="display: none;">.nosp@m.</span>ork@1<span style="display: none;">.nosp@m.</span>.1.2<span style="display: none;">.nosp@m.</span>2</a>/Documentation~/reference-attribute-unitytest.md "UnityTest".</p>
<h1><a class="anchor" id="autotoc_md274"></a>
Action execution order</h1>
<p>The actions related to a test run in the following order:</p>
<ul>
<li>Attributes implementing <a href="https://github.com/nunit/docs/wiki/IApplyToContext-Interface">IApplyToContext</a></li>
<li>Any attribute implementing <a href="#outerunitytestaction">OuterUnityTestAction</a> has its <code>BeforeTest</code> invoked</li>
<li>Tests with <a href="#unitysetup-and-unityteardown">UnitySetUp</a> methods in their test class.</li>
<li>Attributes implementing <a href="https://github.com/nunit/docs/wiki/ICommandWrapper-Interface">IWrapSetUpTearDown</a></li>
<li>Any <a href="https://github.com/nunit/docs/wiki/SetUp-and-TearDown">SetUp</a> attributes</li>
<li><a href="https://nunit.org/docs/2.6/actionAttributes.html">Action attributes</a> have their <code>BeforeTest</code> method invoked</li>
<li>Attributes implementing of <a href="https://github.com/nunit/docs/wiki/ICommandWrapper-Interface">IWrapTestMethod</a> <br  />
</li>
<li><b>The test itself runs</b></li>
<li><a href="https://nunit.org/docs/2.6/actionAttributes.html">Action attributes</a> have their <code>AfterTest</code> method invoked</li>
<li>Any method with the <a href="https://github.com/nunit/docs/wiki/SetUp-and-TearDown">TearDown</a> attribute</li>
<li>Tests with <a href="#unitysetup-and-unityteardown">UnityTearDown</a> methods in their test class</li>
<li>Any <a href="#outerunitytestaction">OuterUnityTestAction</a> has its <code>AfterTest</code> invoked</li>
</ul>
<p>The list of actions is the same for both <code>Test</code> and <code>UnityTest</code>.</p>
<h1><a class="anchor" id="autotoc_md275"></a>
UnitySetUp and UnityTearDown</h1>
<p>The <code>UnitySetUp</code> and <code>UnityTearDown</code> attributes are identical to the standard <code>SetUp</code> and <code>TearDown</code> attributes, with the exception that they allow for /home/santeri/UnityProjects/EPO_design_patterns/Library/PackageCache/com<a href="#" onclick="location.href='mai'+'lto:'+'.un'+'it'+'y.t'+'es'+'t-f'+'ra'+'mew'+'or'+'k@1'+'.1'+'.22'; return false;">.unit<span style="display: none;">.nosp@m.</span>y.te<span style="display: none;">.nosp@m.</span>st-fr<span style="display: none;">.nosp@m.</span>amew<span style="display: none;">.nosp@m.</span>ork@1<span style="display: none;">.nosp@m.</span>.1.2<span style="display: none;">.nosp@m.</span>2</a>/Documentation~/reference-custom-yield-instructions.md "yielding instructions". The <code>UnitySetUp</code> and <code>UnityTearDown</code> attributes expect a return type of <a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.ienumerator?view=netframework-4.8">IEnumerator</a>.</p>
<h2><a class="anchor" id="autotoc_md276"></a>
Example</h2>
<div class="fragment"><div class="line"> {c#}</div>
<div class="line">public class SetUpTearDownExample</div>
<div class="line">{</div>
<div class="line">    [UnitySetUp]</div>
<div class="line">    public IEnumerator SetUp()</div>
<div class="line">    {</div>
<div class="line">        yield return new EnterPlayMode();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [Test]</div>
<div class="line">    public void MyTest()</div>
<div class="line">    {</div>
<div class="line">        Debug.Log(&quot;This runs inside playmode&quot;);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    [UnityTearDown]</div>
<div class="line">    public IEnumerator TearDown()</div>
<div class="line">    {</div>
<div class="line"> </div>
<div class="line">        yield return new ExitPlayMode();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md277"></a>
OuterUnityTestAction</h1>
<p><code>OuterUnityTestAction</code> is a wrapper outside of the tests, which allows for any tests with this attribute to run code before and after the tests. This method allows for yielding commands in the same way as <code>UnityTest</code>. The attribute must inherit the <code>NUnit</code> attribute and implement <code>IOuterUnityTestAction</code>.</p>
<h2><a class="anchor" id="autotoc_md278"></a>
Example</h2>
<div class="fragment"><div class="line"> {c#}</div>
<div class="line">using System.Collections;</div>
<div class="line">using NUnit.Framework;</div>
<div class="line">using NUnit.Framework.Interfaces;</div>
<div class="line">using UnityEngine;</div>
<div class="line">using UnityEngine.TestTools;</div>
<div class="line"> </div>
<div class="line">public class MyTestClass</div>
<div class="line">{</div>
<div class="line">    [UnityTest, MyOuterActionAttribute]</div>
<div class="line">    public IEnumerator MyTestInsidePlaymode()</div>
<div class="line">    {</div>
<div class="line">        Assert.IsTrue(Application.isPlaying);</div>
<div class="line">        yield return null;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line">public class MyOuterActionAttribute : NUnitAttribute, IOuterUnityTestAction</div>
<div class="line">{</div>
<div class="line">    public IEnumerator BeforeTest(ITest test)</div>
<div class="line">    {</div>
<div class="line">        yield return new EnterPlayMode();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    public IEnumerator AfterTest(ITest test)</div>
<div class="line">    {</div>
<div class="line">        yield return new ExitPlayMode();</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md279"></a>
Domain Reloads</h1>
<p>In <b>Edit Mode</b> tests it is possible to yield instructions that can result in a domain reload, such as entering or exiting <b>Play Mode</b> (see /home/santeri/UnityProjects/EPO_design_patterns/Library/PackageCache/com<a href="#" onclick="location.href='mai'+'lto:'+'.un'+'it'+'y.t'+'es'+'t-f'+'ra'+'mew'+'or'+'k@1'+'.1'+'.22'; return false;">.unit<span style="display: none;">.nosp@m.</span>y.te<span style="display: none;">.nosp@m.</span>st-fr<span style="display: none;">.nosp@m.</span>amew<span style="display: none;">.nosp@m.</span>ork@1<span style="display: none;">.nosp@m.</span>.1.2<span style="display: none;">.nosp@m.</span>2</a>/Documentation~/reference-custom-yield-instructions.md "Custom yield instructions"). When a domain reload happens, all non-Unity actions (such as <code>OneTimeSetup</code> and <code>Setup</code>) are rerun before the code, which initiated the domain reload, continues. <a class="el" href="namespace_unity.html">Unity</a> actions (such as <code>UnitySetup</code>) are not rerun. If the <a class="el" href="namespace_unity.html">Unity</a> action is the code that initiated the domain reload, then the rest of the code in the <code>UnitySetup</code> method runs after the domain reload. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
